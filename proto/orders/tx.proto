syntax = "proto3";
package stateset.core.orders;

option go_package = "github.com/stateset/core/x/orders/types";

import "gogoproto/gogo.proto";
import "cosmos/base/v1beta1/coin.proto";
import "orders/orders.proto";

// Msg defines the orders Msg service.
service Msg {
  rpc CreateOrder(MsgCreateOrder) returns (MsgCreateOrderResponse);
  rpc ConfirmOrder(MsgConfirmOrder) returns (MsgConfirmOrderResponse);
  rpc PayOrder(MsgPayOrder) returns (MsgPayOrderResponse);
  rpc ShipOrder(MsgShipOrder) returns (MsgShipOrderResponse);
  rpc DeliverOrder(MsgDeliverOrder) returns (MsgDeliverOrderResponse);
  rpc CompleteOrder(MsgCompleteOrder) returns (MsgCompleteOrderResponse);
  rpc CancelOrder(MsgCancelOrder) returns (MsgCancelOrderResponse);
  rpc RefundOrder(MsgRefundOrder) returns (MsgRefundOrderResponse);
  rpc OpenDispute(MsgOpenDispute) returns (MsgOpenDisputeResponse);
  rpc ResolveDispute(MsgResolveDispute) returns (MsgResolveDisputeResponse);
}

message MsgCreateOrder {
  string customer = 1;
  string merchant = 2;
  repeated OrderItem items = 3;
  ShippingInfo shipping_info = 4;
  string metadata = 5;
}

message MsgCreateOrderResponse {
  uint64 order_id = 1;
}

message MsgConfirmOrder {
  string merchant = 1;
  uint64 order_id = 2;
}

message MsgConfirmOrderResponse {}

message MsgPayOrder {
  string customer = 1;
  uint64 order_id = 2;
  cosmos.base.v1beta1.Coin amount = 3 [
    (gogoproto.nullable) = false,
    (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Coin"
  ];
  bool use_escrow = 4;
}

message MsgPayOrderResponse {}

message MsgShipOrder {
  string merchant = 1;
  uint64 order_id = 2;
  string carrier = 3;
  string tracking_number = 4;
}

message MsgShipOrderResponse {}

message MsgDeliverOrder {
  string signer = 1;
  uint64 order_id = 2;
}

message MsgDeliverOrderResponse {}

message MsgCompleteOrder {
  string customer = 1;
  uint64 order_id = 2;
}

message MsgCompleteOrderResponse {}

message MsgCancelOrder {
  string signer = 1;
  uint64 order_id = 2;
  string reason = 3;
}

message MsgCancelOrderResponse {}

message MsgRefundOrder {
  string merchant = 1;
  uint64 order_id = 2;
  cosmos.base.v1beta1.Coin refund_amount = 3 [
    (gogoproto.nullable) = false,
    (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Coin"
  ];
  string reason = 4;
  bool full_refund = 5;
}

message MsgRefundOrderResponse {}

message MsgOpenDispute {
  string customer = 1;
  uint64 order_id = 2;
  string reason = 3;
  string description = 4;
  repeated string evidence = 5;
}

message MsgOpenDisputeResponse {
  uint64 dispute_id = 1;
}

message MsgResolveDispute {
  string authority = 1;
  uint64 dispute_id = 2;
  string resolution = 3;
  cosmos.base.v1beta1.Coin refund_amount = 4 [
    (gogoproto.nullable) = false,
    (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Coin"
  ];
  bool to_customer = 5;
}

message MsgResolveDisputeResponse {}

